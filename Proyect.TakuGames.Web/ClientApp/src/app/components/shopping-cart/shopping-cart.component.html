<div class="container">
  <div *ngIf="showSpinner" class="spinner-container"  fxLayoutAlign="center" style="height:100%">
    <div class="loading-indicator">
      <mat-progress-spinner mode="indeterminate" ></mat-progress-spinner>
    </div>
  </div>

    <div>
      <mat-card>
          <div *ngIf="listItems == 0 ; then thenBlock else elseBlock"></div>
          <ng-template #thenBlock>
            <div class="row" *ngFor="let item of listItems" style="padding-top:2em">
              <mat-divider></mat-divider>
            </div>
            <div class="row">
                <div class="col">
                  <div style="padding-top:2em">
                    <mat-divider></mat-divider>
                  </div>
                  <div class="m-0 vh-10 row justify-content-center align-items-center">
                    <h1 style="padding-top:2em">
                      Tu carrito esta vacio
                    </h1>
                  </div>
                </div>
                <div style="padding-top:2em">
                    <mat-divider></mat-divider>
                </div>
            </div>
            <div style="padding-top:10em; padding-bottom:3em">
              <mat-divider></mat-divider>
            </div>
            <div style="padding-top:3em; padding-bottom:3em">
              <button type="button" class="btn-primary btn-sm float-right" [routerLink]='["/"]' style="height:4em;width:20em">
                <h2>
                  Volver
                </h2>
              </button>
            </div>
          </ng-template>
          <ng-template #elseBlock>
            <div class="row" *ngFor="let item of listItems" style="padding-top:2em">
                <div class="col-sm-2" style="padding-top:2em">
                    <img class="preview-image" mar-card-image src="/Upload/{{item.game.coverFileName}}" alt="Game cover image">
                </div>
                <div class="col-sm-4" style="padding-top:2em">
                    <h4>{{item.game.title}}</h4>
                </div>
                <div class="col-sm-3" style="padding-top:2em">
                  <div class="row">
                    <button [disabled]="item.quantity < 2 ? true : false" mat-icon-button color="warn" (click)="deleteOneCartItem(item.game.gameId)">
                      <mat-icon>
                        remove_circle
                      </mat-icon>
                    </button>
                      <h2>
                        {{item.quantity}}
                      </h2>
                      <button mat-icon-button color="primary" (click)="addOneCartItem(item.game.gameId)">
                        <mat-icon>
                          add_circle
                        </mat-icon>
                      </button>
                  </div>
                </div>
                <div class="col-sm-1" style="padding-top:2.6em">
                    <h4>
                      ${{item.game.price * item.quantity}}
                    </h4>
                </div>
                <div class="col-sm-2" style="padding-top:2.3em">
                  <button type="button" mat-icon-button color="accent" (click)="deleteCartItem(item.game.gameId)">
                      <mat-icon>
                        delete
                      </mat-icon>
                  </button>
                </div>
              <mat-divider></mat-divider>
            </div>
            <div class="row">
              <div class="col">
                <div style="padding-top:2em">
                  <mat-divider></mat-divider>
                </div>
                <div class="float-right">
                  <h1 style="padding-top:2em">
                    Total a Pagar: ${{totalPriceCart}}
                  </h1>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <div style="padding-top:3em">
                  <mat-divider></mat-divider>
                </div>
                <div style="padding-top:3em; padding-bottom:3em">
                  <!-- <button type="submit" class="btn-success btn-sm float-right" (click)="purchaseOrder()" style="height:4em;width:20em">
                    <h2>Comprar</h2>
                  </button> -->
                  <!-- <button class="btn-success btn-sm float-right" mat-raised-button color="primary" [routerLink]='["/checkout"]'>
                    CheckOut
                  </button> -->
                  <button class="btn-success btn-sm float-right" mat-raised-button color="primary" (click)="checkOutUser()">
                    CheckOut
                  </button>             
                </div>
              </div>
            </div>
          </ng-template>
      </mat-card>
  </div>
</div>





